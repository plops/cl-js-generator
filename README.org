
* Purpose and Scope

The cl-js-generator repository provides a Common Lisp library for generating JavaScript code through a domain-specific language (DSL). This document provides a high-level introduction to the repository structure, core code generation architecture, and the collection of example applications that demonstrate practical usage patterns.


- keywords: break case catch class const continue debugger default
  delete do else enum export extends false finally for function if
  implements import interface in instanceof let new package private
  protected public return static super switch this throw true try
  typeof var void while with yield

* Examples in cl-js-generator

Each example follows the same pattern:

- gen00.lisp contains Lisp generation code
- Calls write-source to emit JavaScript files
- Often uses cl-who to generate HTML structure
- Produces standard JavaScript project layout


 
** Electron Applications
- *02_electron* – Bookmark Manager (localStorage + fetch) 
- *03_electron_capture* – Screen Recorder (desktopCapturer) 
- *04_electron_scrape* – Web Scraper (webview + cheerio)

** Web Visualizations
- *06_p5_js* – Canvas Graphics (setup + draw) 
- *07_d3* – Scatter Plot (d3.csv + scales) 
- *08_ol* – OpenLayers Mapping (4 variants):
  - gen00: Basic OSM tiles 
  - gen01: GeoJSON layer 
  - gen02: Vector editing 
  - gen03: GeoTIFF raster 
- *10_three* – 3D Graphics (WebGL Scene) 

** Browser APIs
- *05_video* – Video Processing (MediaStreamTrackProcessor) 
- *09_webext* – Browser Extension (downloads API) 

** Notes
- All examples follow a consistent generation pattern using `genXX.lisp` scripts that emit HTML via `cl-who` and JavaScript via `write-source` .
- Electron examples output to an `app/` subdirectory; web examples output to `source/` or numbered `sourceXX/` directories .
- Build approaches vary: CDN-based for D3/p5, esbuild bundling for OpenLayers/Three, and npm start for Electron .






* Common DSL Patterns

** JavaScript Constructs Generated￼

The DSL in js.lisp supports comprehensive JavaScript generation:

| Lisp Form | JavaScript Output |
|-----------|-------------------|
| (defun name (args) body) | function name(args) {...} |
| (lambda (args) body) | function(args) {...} |
| (setf a b) | a=b |
| (let-decl var val) | let var=val |
| (const-decl var val) | const var=val |
| (dot obj prop method) | obj.prop.method() |
| (aref arr idx) | arr[idx] |
| (if cond true false) | if (cond) {...} else {...} |
| (dotimes (i n) body) | for(i=0; i<n; i++) {...} |
| (await expr) | await expr |
| (async expr) | async expr |
